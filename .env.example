# =============================================================================
# Freelancer Feedback Assistant - Environment Variables
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
ENVIRONMENT=development
DEBUG=true
APP_NAME="Freelancer Feedback Assistant"
APP_VERSION=1.0.0

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/freelancer_feedback_db

# Database pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
# Redis connection string for caching and task queue
REDIS_URL=redis://localhost:6379/0

# Redis settings
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# -----------------------------------------------------------------------------
# Security & Authentication
# -----------------------------------------------------------------------------
# Generate a secure secret key with: openssl rand -hex 32
SECRET_KEY=your-super-secret-key-change-this-in-production-min-32-chars

# JWT settings
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password hashing
BCRYPT_ROUNDS=12

# -----------------------------------------------------------------------------
# OpenAI API Configuration
# -----------------------------------------------------------------------------
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# OpenAI settings
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=1000
OPENAI_TEMPERATURE=0.7
OPENAI_TIMEOUT=120

# AI parsing settings
AI_CACHE_ENABLED=true
AI_CACHE_TTL=3600
MAX_FEEDBACK_LENGTH=5000

# -----------------------------------------------------------------------------
# Email Configuration (SendGrid)
# -----------------------------------------------------------------------------
# Get your API key from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.your-sendgrid-api-key-here
SENDGRID_FROM_EMAIL=noreply@freelancerfeedback.com
SENDGRID_FROM_NAME="Freelancer Feedback Assistant"

# Email settings
EMAIL_ENABLED=true
EMAIL_TEMPLATES_DIR=app/templates/email

# -----------------------------------------------------------------------------
# Slack Integration (Optional)
# -----------------------------------------------------------------------------
# Create a Slack app at: https://api.slack.com/apps
SLACK_CLIENT_ID=your-slack-client-id
SLACK_CLIENT_SECRET=your-slack-client-secret
SLACK_SIGNING_SECRET=your-slack-signing-secret
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token

# Slack settings
SLACK_ENABLED=false
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# -----------------------------------------------------------------------------
# File Storage Configuration
# -----------------------------------------------------------------------------
# Storage backend: local, s3, or gcs
STORAGE_BACKEND=local

# Local storage settings
UPLOAD_DIR=./uploads
MAX_UPLOAD_SIZE_MB=50
ALLOWED_FILE_EXTENSIONS=.pdf,.png,.jpg,.jpeg,.gif,.svg,.psd,.ai,.sketch,.fig

# S3-compatible storage (optional)
S3_BUCKET_NAME=freelancer-feedback-uploads
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=your-s3-access-key
S3_SECRET_ACCESS_KEY=your-s3-secret-key
S3_ENDPOINT_URL=https://s3.amazonaws.com
S3_PUBLIC_URL=https://your-cdn-domain.com

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000

# CORS settings
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOW_HEADERS=*

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_AUTH_PER_MINUTE=5

# -----------------------------------------------------------------------------
# Celery Task Queue Configuration
# -----------------------------------------------------------------------------
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# Celery settings
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=300
CELERY_TASK_SOFT_TIME_LIMIT=240

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=logs/app.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# Sentry error tracking (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------
# Prometheus metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# Health check settings
HEALTH_CHECK_ENABLED=true

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_AI_PARSING=true
FEATURE_SLACK_INTEGRATION=false
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_FILE_UPLOADS=true
FEATURE_WEBHOOKS=false

# -----------------------------------------------------------------------------
# GDPR & Privacy
# -----------------------------------------------------------------------------
GDPR_ENABLED=true
DATA_RETENTION_DAYS=365
ANONYMIZE_DELETED_USERS=true
COOKIE_CONSENT_REQUIRED=true

# Privacy settings
ENCRYPT_PII=true
AUDIT_LOG_ENABLED=true
DATA_EXPORT_ENABLED=true

# -----------------------------------------------------------------------------
# Testing Configuration
# -----------------------------------------------------------------------------
# Test database (used only in test environment)
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/freelancer_feedback_test

# Test settings
TEST_OPENAI_API_KEY=sk-test-key
PYTEST_WORKERS=auto
COVERAGE_THRESHOLD=80

# -----------------------------------------------------------------------------
# Development Tools
# -----------------------------------------------------------------------------
# Auto-reload on code changes
RELOAD=true

# Debug toolbar
DEBUG_TOOLBAR_ENABLED=false

# SQL query logging
SQL_ECHO=false

# -----------------------------------------------------------------------------
# Production Settings (Override in production .env)
# -----------------------------------------------------------------------------
# ENVIRONMENT=production
# DEBUG=false
# RELOAD=false
# SQL_ECHO=false
# LOG_LEVEL=WARNING
# ALLOWED_ORIGINS=https://yourdomain.com
# DATABASE_URL=postgresql://user:pass@prod-db:5432/dbname
# REDIS_URL=redis://prod-redis:6379/0
# SENTRY_DSN=https://your-sentry-dsn
# METRICS_ENABLED=true

# -----------------------------------------------------------------------------
# Notes
# -----------------------------------------------------------------------------
# 1. Generate SECRET_KEY: openssl rand -hex 32
# 2. Never commit .env file to version control
# 3. Use different values for development, staging, and production
# 4. Rotate secrets regularly in production
# 5. Use environment-specific .env files (.env.development, .env.production)
# 6. For Fly.io deployment, use: fly secrets set KEY=value
# 7. For Docker, pass via docker-compose.yml or --env-file flag
# 8. Validate all required variables on application startup
